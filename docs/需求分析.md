# 综合设备台账管理系统 - 需求规格说明

**版本:** 1.0
**日期:** 2025-08-01

## 1. 系统概述

本项目旨在将现有的、基于单一 Excel 表格的台账管理方式，升级为一个功能强大、支持多用户协作、具备完整权限控制和自动化流程的 Web 综合设备台账管理平台。

系统核心目标是实现设备的分类管理、用户权限的精细划分、检定流程的自动化、数据的便捷查询与导出，以及操作历史的可追溯性，从而提高设备管理的效率、准确性和安全性。

---

## 2. 核心功能模块

### 2.1. 用户账户与权限系统

- **角色定义**: 系统包含两种用户角色：
    - **管理员 (Admin)**: 拥有系统的最高权限。
    - **普通用户 (User)**: 权限受限，只能管理被授权的设备类别。

- **管理员职责**:
    - 创建、编辑、删除、查看所有普通用户账户。
    - 创建、编辑、删除所有设备类别。
    - 创建、编辑、删除部门类别。
    - 为每个普通用户分配其可以管理的一个或多个**设备类别**。
    - 查看和管理系统中所有类别的所有设备台账。

- **普通用户职责**:
    - 只能查看和管理自己被管理员授权的设备类别下的台账。
    - 无法访问未授权的设备数据。

- **登录**: 所有用户通过账号和密码登录系统。

### 2.2. 设备类别管理

- 此功能仅限**管理员**使用。
- 管理员可以自由地创建新的设备类别（例如：铂热电阻、玻璃量器、电子天平）。
- 管理员可以对已存在的类别进行重命名或删除。
- 管理员可以对已有的数据进行全盘搜索。
- 在使用初期，还需要对之前的数据进行导入，所以需要一个数据导入功能，导入的数据为excel文件，并可以下载一个数据导入的excel模板。

### 2.3. 设备台账管理

- **数据模型/表格字段**:
    - 核心台账表格包含以下字段：`部门`、`计量器具名称`、`型号/规格`、`准确度等级`、`测量范围`、`检定周期`、`检定日期`、`下次检定日期`、`计量编号`、`安装地点`、`制造厂家`、`出厂日期`、`检定方式`、`备注`。
    - 新增一个**设备状态**字段，可选值包括：`在用`、`停用`、`报废`。
    - `部门`类别根据管理员所添加的类别进行选择，普通用户不能输入新`部门`，`部门`有'树脂车间（高温）'，'树脂车间（低温）'、'工业漆车间'、'防腐车间'、'汽摩车间'、'通用漆车间'、'安环部'、'物管部'等，管理员可以删除、添加这些类别，其他用户选择类别。

- **自动化逻辑**:
    - **下次检定日期自动计算**: 在新增或编辑条目时，当用户输入`检定日期`并设置`检定周期`（如1年、2年，只设置两个选项一年和两年）后，系统必须自动计算并填充`下次检定日期`。
    - **计算规则**: `下次检定日期 = 检定日期 + 检定周期 - 1天`。
        - 示例：检定周期为1年，检定日期为 `2025-07-19`，则下次检定日期自动生成为 `2026-07-18`。

- **设备状态管理**:
    - 用户可以修改设备的状态，其中`停用`和`报废`需要有时间记录。
    - `停用`和`报废`状态的设备需要能被单独分类或筛选出来。

### 2.4. 数据筛选与导出

- **数据筛选**:
    - 系统需提供强大的筛选功能，允许用户根据一个或多个条件组合查询。
    - 筛选条件至少包括：`部门`、`设备类别`、`设备状态`、`下次检定日期范围`（例如，选择一个时间段来查看所有在此期间需要检定的设备）。

- **数据导出**:
    - **检定计划导出**: 核心功能。用户可以根据`下次检定日期`筛选数据，并将其导出为 Excel 文件。
        - **月度计划**: 筛选并导出下个月需要检定的所有设备列表。
        - **年度计划**: 筛选并导出下一年需要检定的所有设备列表。
    - **通用导出**: 用户可以导出当前筛选条件下的所有数据为 Excel 文件。

### 2.5. 仪表盘 (Dashboard)

- 用户登录后看到的第一个页面，用于直观展示关键信息。
- **显示内容建议**:
    - **关键指标卡片**:
        - 本月待检设备数量
        - 已超期未检设备数量
        - "停用"状态设备总数
    - **设备类别分布图**: 一个简单的图表，展示各个类别下的设备数量。

### 2.6. 操作日志 (Audit Trail)

- **目的**: 保证所有操作可追溯，满足管理和审计要求。
- **记录内容**: 系统应自动记录所有关键操作，日志需包含四个要素：**操作人 (Who)**、**操作时间 (When)**、**操作内容 (What)**、**操作对象 (Which)**。
    - 示例: `用户A` 在 `2025-08-01 10:30` `修改了` `ID为101的铂热电阻` 的 `检定日期`。
- 此日志仅限**管理员**查看。

---

## 3. 技术架构和运行环境

### 3.1 运行环境
- **部署方式**: Web应用，支持主流浏览器（Chrome、Firefox、Edge、Safari）
- **不需要移动端适配**: 主要在桌面浏览器中操作
- **并发用户**: 最大支持8个并发用户，正常使用2-3个用户

### 3.2 系统集成
- **API接口**: 预留标准REST API接口，便于将来与其他系统集成
- **数据导入**: 支持Excel文件导入功能，提供标准模板下载

---

## 4. 数据验证和业务规则

### 4.1 数据验证
- **必填字段**: 部门、计量器具名称、检定日期、检定周期、型号/规格、准确度等级为必填项
- **计量编号**: 各设备类型格式不同，系统不做统一格式验证，但需保证同一设备类别内唯一性
- **日期验证**: 检定日期不能超过当前日期，下次检定日期自动计算

### 4.2 业务规则
- **设备状态变更**: 从"在用"改为"停用"或"报废"需记录变更时间
- **设备状态审批流程**: 暂定为待开发功能，根据后续需求决定是否实现
- **权限控制**: 严格按角色控制数据访问范围

---

## 5. 非功能性需求

### 5.1 数据安全
- **数据保留**: 系统必须保留至少**5年**内的所有台账及相关历史数据
- **密码安全**: 用户密码需加密存储，建议使用bcrypt等安全算法
- **会话管理**: 用户会话超时时间设置为2小时，超时后需重新登录
- **权限控制**: 严格遵守基于角色的权限控制，确保数据安全

### 5.2 系统性能
- **响应时间**: 页面加载时间不超过3秒，查询响应时间不超过2秒
- **数据处理**: 支持单次导出不超过10000条记录
- **并发处理**: 支持最大8个用户同时在线操作

### 5.3 用户体验
- **界面设计**: 简洁、直观，符合用户操作习惯
- **操作反馈**: 所有操作需有明确的成功/失败反馈
- **数据备份**: 建议定期自动备份数据

---